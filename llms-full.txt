# ğŸš€ Backend Monorepo - Multi-Service Architecture

## ğŸ“‹ VisÃ£o Geral

Este projeto implementa uma arquitetura multi-service para o Railway, separando as APIs por tecnologia (Node.js, Python, Go) em serviÃ§os independentes.

## ğŸ—ï¸ Arquitetura

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Node.js APIs  â”‚    â”‚  Python APIs    â”‚    â”‚    Go APIs      â”‚
â”‚   (Port 3000)   â”‚    â”‚   (Port 8000)   â”‚    â”‚   (Port 7777)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                       â”‚                       â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   Railway       â”‚
                    â”‚   Platform      â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ¯ EstratÃ©gias Implementadas

### 1. **Multi-Service Railway** (RECOMENDADA)
- Cada tecnologia em um serviÃ§o separado no Railway
- Deploy independente
- Escalabilidade individual
- Monitoramento especÃ­fico

### 2. **Docker Compose Local**
- Desenvolvimento local com todos os serviÃ§os
- Nginx como reverse proxy
- Monitoramento com Prometheus + Grafana

## ğŸš€ Quick Start

### OpÃ§Ã£o 1: Deploy no Railway (ProduÃ§Ã£o)

```bash
# 1. Instalar Railway CLI
npm install -g @railway/cli

# 2. Login no Railway
railway login

# 3. Executar deploy automatizado
chmod +x deploy-multi-service.sh
./deploy-multi-service.sh
```

### OpÃ§Ã£o 2: Desenvolvimento Local

```bash
# 1. Iniciar todos os serviÃ§os
docker-compose -f docker-compose.multi-service.yml up -d

# 2. Verificar status
docker-compose -f docker-compose.multi-service.yml ps

# 3. Ver logs
docker-compose -f docker-compose.multi-service.yml logs -f
```

## ğŸ“ Estrutura de DiretÃ³rios

```
backend-monorepo/
â”œâ”€â”€ railway-nodejs/           # ServiÃ§os Node.js
â”‚   â”œâ”€â”€ Dockerfile
â”‚   â”œâ”€â”€ railway.toml
â”‚   â””â”€â”€ apps/
â”œâ”€â”€ railway-python/           # ServiÃ§os Python
â”‚   â”œâ”€â”€ Dockerfile
â”‚   â”œâ”€â”€ railway.toml
â”‚   â””â”€â”€ services/
â”œâ”€â”€ railway-golang/           # ServiÃ§os Go
â”‚   â”œâ”€â”€ Dockerfile
â”‚   â”œâ”€â”€ railway.toml
â”‚   â””â”€â”€ services/
â”œâ”€â”€ nginx/                    # ConfiguraÃ§Ã£o Nginx
â”‚   â””â”€â”€ nginx.conf
â”œâ”€â”€ monitoring/               # ConfiguraÃ§Ã£o monitoramento
â”œâ”€â”€ deploy-multi-service.sh   # Script de deploy
â””â”€â”€ docker-compose.multi-service.yml
```

## ğŸ”§ ConfiguraÃ§Ã£o

### VariÃ¡veis de Ambiente (Railway Dashboard)

```bash
# Databases
DATABASE_URL=postgresql://user:pass@host:5432/dbname
MONGODB_URI=mongodb://user:pass@host:27017/dbname
REDIS_URL=redis://user:pass@host:6379

# External APIs
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_KEY=your-supabase-anon-key
OPENAI_API_KEY=your-openai-api-key

# Service Discovery
NODEJS_API_URL=https://nodejs-service.railway.app
PYTHON_API_URL=https://python-service.railway.app
GOLANG_API_URL=https://golang-service.railway.app

# Security
JWT_SECRET=your-jwt-secret
ENCRYPTION_KEY=your-encryption-key
```

## ğŸŒ Endpoints

### Node.js Services
- **Health**: `GET /health`
- **APIs**: `GET /api/nodejs/`
- **Life Tracker**: `GET /api/life-tracker/`
- **SeguranÃ§a**: `GET /api/seguranca/`
- **Produtos**: `GET /api/produtos/`

### Python Services
- **Health**: `GET /health`
- **APIs**: `GET /api/python/`
- **Meu Nutri**: `GET /api/meu-nutri/`
- **Life Tracker**: `GET /api/life-tracker-python/`

### Go Services
- **Health**: `GET /health`
- **APIs**: `GET /api/golang/`
- **Invest Tracker**: `GET /api/invest-tracker/`
- **Zen Launcher**: `GET /api/zen-launcher/`

## ğŸ“Š Monitoramento

### Local Development
- **Grafana**: http://localhost:3001 (admin/admin)
- **Prometheus**: http://localhost:9090

### Railway Production
- **Railway Dashboard**: Monitoramento nativo
- **Logs**: `railway logs --service <service-name>`
- **Status**: `railway status --service <service-name>`

## ğŸ”„ Deploy Commands

### Deploy Individual
```bash
# Node.js apenas
./deploy-multi-service.sh --nodejs-only

# Python apenas
./deploy-multi-service.sh --python-only

# Go apenas
./deploy-multi-service.sh --golang-only
```

### Verificar Status
```bash
./deploy-multi-service.sh --check-status
```

## ğŸ› ï¸ Desenvolvimento

### Adicionar Novo ServiÃ§o

1. **Criar diretÃ³rio do serviÃ§o**:
```bash
mkdir railway-newservice
cd railway-newservice
```

2. **Criar Dockerfile**:
```dockerfile
FROM node:18-alpine
WORKDIR /app
COPY package*.json ./
RUN npm install
COPY . .
EXPOSE 3000
CMD ["npm", "start"]
```

3. **Criar railway.toml**:
```toml
[build]
builder = "DOCKERFILE"

[deploy]
healthcheckPath = "/health"
```

4. **Adicionar ao script de deploy**:
```bash
# Editar deploy-multi-service.sh
create_project "backend-newservice" "railway-newservice"
deploy_service "New Service" "railway-newservice"
```

### Health Checks

Cada serviÃ§o deve implementar um endpoint `/health`:

```javascript
// Node.js
app.get('/health', (req, res) => {
  res.status(200).json({ status: 'healthy', timestamp: new Date() });
});
```

```python
# Python
@app.get("/health")
async def health_check():
    return {"status": "healthy", "timestamp": datetime.now()}
```

```go
// Go
func healthHandler(c *gin.Context) {
    c.JSON(200, gin.H{
        "status": "healthy",
        "timestamp": time.Now(),
    })
}
```

## ğŸ”’ SeguranÃ§a

### Rate Limiting
- API endpoints: 10 requests/second
- Login endpoints: 1 request/second

### Headers de SeguranÃ§a
- X-Frame-Options: SAMEORIGIN
- X-XSS-Protection: 1; mode=block
- X-Content-Type-Options: nosniff
- Content-Security-Policy configurado

### AutenticaÃ§Ã£o
- JWT tokens para APIs
- Basic auth para monitoramento
- HTTPS obrigatÃ³rio em produÃ§Ã£o

## ğŸ’° Custos e OtimizaÃ§Ã£o

### Resource Allocation
- **Node.js**: 512MB RAM, 0.5 CPU
- **Python**: 256MB RAM, 0.25 CPU
- **Go**: 256MB RAM, 0.25 CPU

### Auto-scaling
- CPU usage > 70%
- Memory usage > 80%
- Request rate > 100 req/min

## ğŸ› Troubleshooting

### Problemas Comuns

1. **ServiÃ§o nÃ£o inicia**:
```bash
# Verificar logs
railway logs --service <service-name>

# Verificar variÃ¡veis de ambiente
railway variables --service <service-name>
```

2. **Health check falha**:
```bash
# Verificar endpoint
curl https://<service>.railway.app/health

# Verificar configuraÃ§Ã£o
cat railway-<service>/railway.toml
```

3. **ComunicaÃ§Ã£o entre serviÃ§os**:
```bash
# Verificar URLs configuradas
railway variables --service <service-name> | grep API_URL
```

### Logs Ãšteis

```bash
# Logs em tempo real
railway logs --service backend-nodejs --follow

# Logs dos Ãºltimos 1000 eventos
railway logs --service backend-python --limit 1000

# Logs de erro apenas
railway logs --service backend-golang --level error
```

## ğŸ“ˆ Vantagens desta Arquitetura

âœ… **Deploy Independente**: Cada serviÃ§o pode ser atualizado sem afetar outros
âœ… **Escalabilidade**: Escalar apenas serviÃ§os com alta demanda
âœ… **Monitoramento**: MÃ©tricas especÃ­ficas por tecnologia
âœ… **Debugging**: Logs isolados por serviÃ§o
âœ… **Custos**: OtimizaÃ§Ã£o de recursos por serviÃ§o
âœ… **ManutenÃ§Ã£o**: Equipes podem trabalhar independentemente
âœ… **Tecnologia**: Usar a melhor tecnologia para cada caso de uso

## âš ï¸ ConsideraÃ§Ãµes

âš ï¸ **Complexidade**: Mais serviÃ§os para gerenciar
âš ï¸ **LatÃªncia**: ComunicaÃ§Ã£o entre serviÃ§os
âš ï¸ **Custos**: MÃºltiplos serviÃ§os podem custar mais
âš ï¸ **Debugging**: Mais complexo para issues distribuÃ­dos

## ğŸ¤ ContribuiÃ§Ã£o

1. Fork o projeto
2. Crie uma branch para sua feature
3. Implemente seguindo os padrÃµes estabelecidos
4. Teste localmente com Docker Compose
5. Deploy no Railway para testes
6. Abra um Pull Request

## ğŸ“ Suporte

- **DocumentaÃ§Ã£o**: Este README
- **Issues**: GitHub Issues
- **Railway**: Railway Dashboard
- **Logs**: `railway logs --service <service-name>`

---

# Backend Monorepo - Estrutura de Deploy

Este documento descreve a estrutura de deploy customizada para o Backend Monorepo, que agrupa serviÃ§os por tecnologia usando Docker multi-stage build.

## ğŸ—ï¸ Arquitetura

### Estrutura de ServiÃ§os

```
backend-monorepo/
â”œâ”€â”€ nodejs/
â”‚   â”œâ”€â”€ apis/                 # APIs NestJS
â”‚   â””â”€â”€ catalog-products/     # Catalog Products
â”œâ”€â”€ python/
â”‚   â””â”€â”€ meu-nutri/           # Meu Nutri (FastAPI)
â”œâ”€â”€ golang/
â”‚   â”œâ”€â”€ invest-tracker/      # Invest Tracker
â”‚   â”œâ”€â”€ zen-launcher/        # Zen Launcher
â”‚   â”œâ”€â”€ catalog-structure/   # Catalog Structure
â”‚   â””â”€â”€ business/            # Business
â””â”€â”€ deploy/
    â”œâ”€â”€ scripts/             # Scripts de build e deploy
    â”œâ”€â”€ configs/             # ConfiguraÃ§Ãµes
    â””â”€â”€ dockerfiles/         # Dockerfiles especÃ­ficos
```

### Tecnologias Agrupadas

| Tecnologia | ServiÃ§os | Portas |
|------------|----------|--------|
| **Node.js** | APIs, Catalog Products | 3000, 3001 |
| **Python** | Meu Nutri | 8000 |
| **Go** | Invest Tracker, Zen Launcher, Catalog Structure, Business | 8080-8083 |

## ğŸ³ Docker Multi-Stage Build

### Estrutura do Dockerfile Principal

O `Dockerfile` principal usa multi-stage build para otimizar o processo:

1. **Stage 1 - Node.js Builder**: Compila serviÃ§os Node.js
2. **Stage 2 - Python Builder**: Prepara ambiente Python
3. **Stage 3 - Go Builder**: Compila binÃ¡rios Go
4. **Stage 4 - Runtime**: Imagem final com todos os serviÃ§os

### Vantagens do Multi-Stage Build

- âœ… **OtimizaÃ§Ã£o de tamanho**: Apenas binÃ¡rios necessÃ¡rios na imagem final
- âœ… **SeguranÃ§a**: NÃ£o inclui ferramentas de build no runtime
- âœ… **EficiÃªncia**: Reutiliza layers entre builds
- âœ… **Isolamento**: Cada tecnologia tem seu prÃ³prio ambiente de build

## ğŸš€ Como Usar

### PrÃ©-requisitos

- Docker e Docker Compose instalados
- Git para clonar o repositÃ³rio
- Make (opcional, para usar comandos simplificados)

### Comandos RÃ¡pidos

```bash
# Ver todos os comandos disponÃ­veis
make help

# Build e deploy completo
make build
make deploy

# Ambiente de desenvolvimento
make dev

# ProduÃ§Ã£o
make prod

# Ver logs
make logs

# Status dos serviÃ§os
make status
```

### Comandos Detalhados

#### 1. Build Local

```bash
# Build de todos os serviÃ§os
./deploy/scripts/build.sh

# Ou usando Make
make build
```

#### 2. Deploy

```bash
# Deploy em desenvolvimento
./deploy/scripts/deploy.sh development

# Deploy em produÃ§Ã£o
./deploy/scripts/deploy.sh production

# Deploy com limpeza
./deploy/scripts/deploy.sh development --clean
```

#### 3. Docker Compose

```bash
# Iniciar todos os serviÃ§os
docker-compose up -d

# Build e iniciar
docker-compose up -d --build

# Ver logs
docker-compose logs -f

# Parar serviÃ§os
docker-compose down
```

## ğŸ“Š Monitoramento

### Health Checks

Cada serviÃ§o possui health checks configurados:

- **Node.js**: `http://localhost:3000/health`
- **Python**: `http://localhost:8000/health`
- **Go**: `http://localhost:8080/health` (cada serviÃ§o)

### Ferramentas de Monitoramento

| Ferramenta | URL | DescriÃ§Ã£o |
|------------|-----|-----------|
| **Prometheus** | http://localhost:9090 | Coleta de mÃ©tricas |
| **Grafana** | http://localhost:3001 | VisualizaÃ§Ã£o de dados |
| **PgAdmin** | http://localhost:5050 | Admin PostgreSQL |
| **Mongo Express** | http://localhost:8081 | Admin MongoDB |
| **Redis Commander** | http://localhost:8082 | Admin Redis |

## ğŸ—„ï¸ Bancos de Dados

### ConfiguraÃ§Ã£o

- **PostgreSQL**: Porta 5432 (Meu Nutri)
- **MongoDB**: Porta 27017 (ServiÃ§os Go)
- **Redis**: Porta 6379 (Cache)

### InicializaÃ§Ã£o

Os bancos sÃ£o inicializados automaticamente com:
- Scripts SQL para PostgreSQL
- ConfiguraÃ§Ãµes de usuÃ¡rio e senha
- Health checks configurados

## ğŸ”§ ConfiguraÃ§Ã£o de Ambiente

### VariÃ¡veis de Ambiente

Crie um arquivo `.env` na raiz do projeto:

```env
# APIs Externas
SUPABASE_URL=sua_url_do_supabase
SUPABASE_KEY=sua_chave_do_supabase
OPENAI_API_KEY=sua_chave_da_openai

# Bancos de Dados
DATABASE_URL=postgresql://postgres:postgres@postgres:5432/meu_nutri
MONGODB_URI=mongodb://mongodb:27017
REDIS_URL=redis://redis:6379

# Ambiente
NODE_ENV=production
PYTHONPATH=/app/services/python/meu-nutri
GIN_MODE=release
```

### Portas dos ServiÃ§os

| ServiÃ§o | Porta | Tecnologia |
|---------|-------|------------|
| APIs | 3000 | Node.js |
| Catalog Products | 3001 | Node.js |
| Meu Nutri | 8000 | Python |
| Invest Tracker | 8080 | Go |
| Zen Launcher | 8081 | Go |
| Catalog Structure | 8082 | Go |
| Business | 8083 | Go |

## ğŸ“ Scripts DisponÃ­veis

### Scripts de Build

- `deploy/scripts/build.sh`: Build completo de todos os serviÃ§os
- `deploy/scripts/start-services.sh`: InicializaÃ§Ã£o dos serviÃ§os no container

### Scripts de Deploy

- `deploy/scripts/deploy.sh`: Deploy automatizado com verificaÃ§Ãµes

### Comandos Make

```bash
# Desenvolvimento
make dev              # Iniciar ambiente de desenvolvimento
make dev-build        # Build e iniciar desenvolvimento

# Deploy
make deploy           # Deploy em desenvolvimento
make prod             # Deploy em produÃ§Ã£o
make staging          # Deploy em staging

# Gerenciamento
make up               # Iniciar serviÃ§os
make down             # Parar serviÃ§os
make restart          # Reiniciar serviÃ§os
make status           # Status dos serviÃ§os
make logs             # Ver logs

# Limpeza
make clean            # Limpeza completa
make clean-build      # Limpar e rebuildar

# Testes
make test             # Executar todos os testes
make test-nodejs      # Testes Node.js
make test-python      # Testes Python
make test-golang      # Testes Go

# Linting
make lint             # Linting de todos os serviÃ§os
make lint-nodejs      # Linting Node.js
make lint-python      # Linting Python
make lint-golang      # Linting Go

# Monitoramento
make monitoring       # Abrir interfaces de monitoramento

# UtilitÃ¡rios
make shell            # Shell do container backend
make shell-postgres   # Shell PostgreSQL
make shell-mongodb    # Shell MongoDB
make shell-redis      # Shell Redis

# Backup
make backup           # Backup dos bancos
make restore          # Restaurar backup

# InformaÃ§Ãµes
make info             # InformaÃ§Ãµes do sistema
make version          # VersÃµes dos serviÃ§os
```

## ğŸ” Troubleshooting

### Problemas Comuns

#### 1. Porta jÃ¡ em uso

```bash
# Verificar portas em uso
netstat -tulpn | grep :3000

# Parar serviÃ§os conflitantes
sudo systemctl stop nginx  # exemplo
```

#### 2. Erro de permissÃ£o

```bash
# Dar permissÃ£o aos scripts
chmod +x deploy/scripts/*.sh
```

#### 3. Container nÃ£o inicia

```bash
# Ver logs detalhados
docker-compose logs backend-monorepo

# Verificar configuraÃ§Ã£o
docker-compose config
```

#### 4. Banco de dados nÃ£o conecta

```bash
# Verificar se os bancos estÃ£o rodando
docker-compose ps

# Testar conexÃ£o
docker-compose exec postgres pg_isready -U postgres
```

### Logs e Debug

```bash
# Logs em tempo real
make logs

# Logs especÃ­ficos
make logs-backend
make logs-db

# Logs de um serviÃ§o especÃ­fico
docker-compose logs -f backend-monorepo
```

## ğŸš€ Deploy em ProduÃ§Ã£o

### PreparaÃ§Ã£o

1. **Configurar variÃ¡veis de ambiente**:
   ```bash
   export SUPABASE_URL=sua_url
   export SUPABASE_KEY=sua_chave
   export OPENAI_API_KEY=sua_chave
   ```

2. **Build da imagem**:
   ```bash
   make build
   ```

3. **Deploy**:
   ```bash
   make prod
   ```

### VerificaÃ§Ãµes PÃ³s-Deploy

```bash
# Verificar status
make status

# Health checks
curl http://localhost:3000/health
curl http://localhost:8000/health
curl http://localhost:8080/health

# Ver logs
make logs
```

## ğŸ“ˆ Monitoramento em ProduÃ§Ã£o

### MÃ©tricas Importantes

- **CPU e MemÃ³ria**: Uso por container
- **LatÃªncia**: Tempo de resposta das APIs
- **Throughput**: RequisiÃ§Ãµes por segundo
- **Erros**: Taxa de erro por serviÃ§o
- **Disco**: Uso de espaÃ§o em banco de dados

### Alertas

Configure alertas no Prometheus/Grafana para:
- Uso de CPU > 80%
- Uso de memÃ³ria > 85%
- Taxa de erro > 5%
- LatÃªncia > 2s

## ğŸ”„ CI/CD

### Pipeline Sugerido

```yaml
# .github/workflows/deploy.yml
name: Deploy Backend Monorepo

on:
  push:
    branches: [main]

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - name: Build and Deploy
        run: |
          make build
          make prod
```

## ğŸ“š Recursos Adicionais

- [Docker Multi-Stage Build](https://docs.docker.com/develop/dev-best-practices/multistage-build/)
- [Docker Compose](https://docs.docker.com/compose/)
- [Prometheus](https://prometheus.io/docs/)
- [Grafana](https://grafana.com/docs/)

## ğŸ¤ ContribuiÃ§Ã£o

Para contribuir com melhorias na estrutura de deploy:

1. Crie uma branch para sua feature
2. Implemente as mudanÃ§as
3. Teste localmente com `make dev`
4. Abra um Pull Request

## ğŸ“ Suporte

Para dÃºvidas ou problemas:

1. Verifique a seÃ§Ã£o de troubleshooting
2. Consulte os logs com `make logs`
3. Abra uma issue no repositÃ³rio 

# FormulÃ¡rio de CriaÃ§Ã£o de Franquias - DocumentaÃ§Ã£o

## VisÃ£o Geral

Este documento descreve a implementaÃ§Ã£o do formulÃ¡rio de criaÃ§Ã£o de franquias no frontend, seguindo o padrÃ£o React Hook Form + Zod para validaÃ§Ã£o e integraÃ§Ã£o com a API do backend.

## Arquivos Criados

### 1. Schemas de ValidaÃ§Ã£o
- **`src/schemas/franchise.schema.ts`**
  - Schema Zod para validaÃ§Ã£o do formulÃ¡rio
  - Inclui validaÃ§Ãµes para LocationDto e TerritoryDto
  - Tipos TypeScript inferidos do schema

### 2. Tipos TypeScript
- **`src/types/franchise.types.ts`**
  - Tipos TypeScript para o mÃ³dulo de franquias
  - Interfaces para CreateFranchiseDto, FranchiseResponse, etc.

### 3. ServiÃ§o de API
- **`src/services/api/franchises.service.ts`**
  - FunÃ§Ãµes para interagir com a API de franquias
  - Interceptors para autenticaÃ§Ã£o e tratamento de erros
  - MÃ©todos: createFranchise, getFranchises, getFranchiseById, updateFranchise, deleteFranchise

### 4. Componentes
- **`src/components/franchises/CreateFranchiseForm.tsx`**
  - Componente principal do formulÃ¡rio
  - Usa React Hook Form com zodResolver
  - Organizado em seÃ§Ãµes: InformaÃ§Ãµes BÃ¡sicas, ProprietÃ¡rio, LocalizaÃ§Ã£o, TerritÃ³rio

- **`src/components/franchises/BrazilianStatesSelect.tsx`**
  - Componente reutilizÃ¡vel para seleÃ§Ã£o de estados brasileiros

- **`src/components/franchises/CoordinatesInput.tsx`**
  - Componente para entrada de coordenadas geogrÃ¡ficas

- **`src/components/franchises/index.ts`**
  - Barrel export para facilitar imports

### 5. UtilitÃ¡rios
- **`src/utils/formatters.ts`**
  - FunÃ§Ãµes de formataÃ§Ã£o (CEP, telefone)
  - FunÃ§Ãµes de validaÃ§Ã£o (coordenadas, CEP, telefone)

### 6. Exemplo de IntegraÃ§Ã£o
- **`src/pages/Admin/Franchisees/FranchisesManagement.example.tsx`**
  - Exemplo completo de como integrar o formulÃ¡rio na pÃ¡gina
  - Inclui modal, lista de franquias e handlers

## Como Usar

### 1. InstalaÃ§Ã£o de DependÃªncias

Certifique-se de ter as seguintes dependÃªncias instaladas:

```bash
npm install react-hook-form @hookform/resolvers zod axios
# ou
yarn add react-hook-form @hookform/resolvers zod axios
```

### 2. ConfiguraÃ§Ã£o da API

Configure a variÃ¡vel de ambiente `NEXT_PUBLIC_API_URL` no seu `.env.local`:

```env
NEXT_PUBLIC_API_URL=http://localhost:9090
```

### 3. AutenticaÃ§Ã£o

O serviÃ§o de API espera que o token JWT esteja armazenado em:
- `localStorage.getItem('auth_token')` ou
- `sessionStorage.getItem('auth_token')`

Ajuste o interceptor em `franchises.service.ts` conforme sua implementaÃ§Ã£o de autenticaÃ§Ã£o.

### 4. Uso BÃ¡sico do FormulÃ¡rio

```tsx
import { CreateFranchiseForm } from '@/components/franchises/CreateFranchiseForm';
import { FranchiseResponse } from '@/types/franchise.types';

function MyPage() {
  const handleSuccess = (franchise: FranchiseResponse) => {
    console.log('Franquia criada:', franchise);
    // Recarregar lista, fechar modal, etc.
  };

  return (
    <CreateFranchiseForm
      onSuccess={handleSuccess}
      onCancel={() => console.log('Cancelado')}
    />
  );
}
```

### 5. IntegraÃ§Ã£o com Modal/Drawer

Veja o exemplo completo em `FranchisesManagement.example.tsx` para integraÃ§Ã£o com modal.

## Estrutura do FormulÃ¡rio

O formulÃ¡rio estÃ¡ organizado em seÃ§Ãµes:

1. **InformaÃ§Ãµes BÃ¡sicas**
   - Unit ID (obrigatÃ³rio)
   - Nome da Franquia (obrigatÃ³rio)
   - Status (opcional, padrÃ£o: pending)
   - Tipo (opcional, padrÃ£o: standard)

2. **InformaÃ§Ãµes do ProprietÃ¡rio**
   - ID do ProprietÃ¡rio (obrigatÃ³rio)
   - Nome do ProprietÃ¡rio (obrigatÃ³rio)
   - Email (obrigatÃ³rio, validado)
   - Telefone (opcional, formatado)

3. **LocalizaÃ§Ã£o**
   - EndereÃ§o (obrigatÃ³rio)
   - Cidade (obrigatÃ³rio)
   - Estado (obrigatÃ³rio, select)
   - CEP (obrigatÃ³rio, formatado)
   - Tipo de LocalizaÃ§Ã£o (physical/digital)
   - Latitude e Longitude (obrigatÃ³rios se tipo = physical)

4. **TerritÃ³rio** (opcional)
   - Cidade
   - Estado
   - Raio (km)
   - TerritÃ³rio Exclusivo (checkbox)

## ValidaÃ§Ãµes

Todas as validaÃ§Ãµes sÃ£o feitas usando Zod:

- **Email**: Formato de email vÃ¡lido
- **CEP**: Formato brasileiro (00000-000)
- **Telefone**: Formato brasileiro com mÃ¡scara
- **Coordenadas**: Latitude (-90 a 90) e Longitude (-180 a 180)
- **Estados**: Lista de estados brasileiros vÃ¡lidos
- **Campos obrigatÃ³rios**: Validados conforme o DTO do backend

## Tratamento de Erros

O serviÃ§o de API inclui tratamento de erros:

- **401 Unauthorized**: Remove token e pode redirecionar para login
- **Erros de rede**: Mensagem amigÃ¡vel
- **Erros da API**: Mensagem retornada pelo backend

## PrÃ³ximos Passos

1. **IntegraÃ§Ã£o com API de CEP**: Buscar automaticamente cidade/estado a partir do CEP
2. **IntegraÃ§Ã£o com Mapas**: Selecionar coordenadas visualmente
3. **Preview**: Mostrar preview dos dados antes de submeter
4. **EdiÃ§Ã£o**: Criar formulÃ¡rio de ediÃ§Ã£o usando UpdateFranchiseDto
5. **Upload de Imagens**: Adicionar campo para logo/fotos da franquia

## Notas Importantes

- O endpoint `/franchises` requer autenticaÃ§Ã£o JWT
- Apenas usuÃ¡rios com role de admin podem criar franquias (validaÃ§Ã£o no backend)
- O `unitId` deve ser Ãºnico (backend retornarÃ¡ erro se duplicado)
- Campos de localizaÃ§Ã£o sÃ£o obrigatÃ³rios, mas coordenadas sÃ³ sÃ£o obrigatÃ³rias para localizaÃ§Ãµes fÃ­sicas

## Suporte

Para dÃºvidas ou problemas, consulte:
- DocumentaÃ§Ã£o do React Hook Form: https://react-hook-form.com
- DocumentaÃ§Ã£o do Zod: https://zod.dev
- DocumentaÃ§Ã£o da API: Ver endpoints em `/franchises` no backend


